<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rebel Datapad Codex</title>
<style>
  * { box-sizing:border-box; margin:0; padding:0; font-family:'OCR A Std','Courier New', monospace; }
  body {
    background: radial-gradient(ellipse at center, #050505 0%, #000 100%);
    color:#a0d8ff;
    height:100vh; display:flex; justify-content:center; align-items:center;
    overflow:hidden;
  }
  #datapad {
    width:900px; height:600px;
    background: url('images/metal_texture.jpg') center/cover no-repeat;
    border:6px solid #333;
    border-radius:25px;
    position:relative;
    box-shadow: 0 0 60px rgba(0,255,255,0.05), inset 0 0 20px #000;
    overflow:hidden;
  }
  #datapad::before {
    content:"";
    position:absolute; inset:0;
    border-radius:25px;
    background: url('images/metal_noise.png') repeat;
    opacity:0.2;
    z-index:0;
  }

  /* === SCREEN CORE === */
  #screen {
    position:relative;
    top:40px; left:220px;
    width:600px; height:520px;
    background:radial-gradient(circle at 50% 50%, rgba(10,20,25,0.95) 0%, rgba(5,10,12,0.9) 100%);
    border-radius:15px;
    overflow:hidden;
    box-shadow: inset 0 0 20px rgba(0,255,255,0.2);
    animation: glowPulse 3s infinite alternate;
    cursor: none;
  }

  @keyframes glowPulse {
    0% { box-shadow: inset 0 0 20px rgba(0,255,255,0.15); }
    50% { box-shadow: inset 0 0 35px rgba(0,255,255,0.3); }
    100% { box-shadow: inset 0 0 25px rgba(0,255,255,0.2); }
  }

  #screen * { cursor:none; }

  /* === ENTRY LAYER (Images + Text) === */
  #entryContainer {
    position:absolute;
    inset:0;
    z-index:1;
    overflow-y:auto;
    padding:20px;
  }
  #entryContainer img {
    display:block;
    margin:10px auto;
    max-width:300px;
    height:auto;
    border:2px solid #33cfff;
    border-radius:4px;
    box-shadow:0 0 15px rgba(0,255,255,0.3);
  }

  /* === OVERLAY EFFECTS (Above images, below UI) === */
  #overlayEffects {
    position:absolute;
    inset:0;
    z-index:2;
    pointer-events:none;
  }
  #blueBase {
    position:absolute;
    inset:0;
    background-color:rgba(0,255,255,0.35);
    mix-blend-mode:screen;
  }
  #flicker {
    position:absolute;
    inset:0;
    background: repeating-linear-gradient(0deg, rgba(0,255,255,0.25) 0px, rgba(0,255,255,0.25) 1px, transparent 2px, transparent 3px);
    opacity:0;
    transition:opacity 0.1s;
  }
  #distortion {
    position:absolute;
    inset:0;
    background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(0,255,255,0.5) 0%, rgba(0,255,255,0.2) 20%, rgba(0,255,255,0.1) 35%, transparent 60%);
    opacity:0.45;
    mix-blend-mode:screen;
    filter: blur(10px);
    transform: scale(1);
    transition: transform 0.1s ease-out;
  }
  #screen::before {
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0,255,255,0.05) 0px,
      rgba(0,255,255,0.05) 1px,
      transparent 2px,
      transparent 3px
    );
    animation: scanlines 1s linear infinite;
    z-index:3;
  }
  @keyframes scanlines {
    0% { background-position: 0 0; }
    100% { background-position: 0 4px; }
  }

  /* === MAIN CONTENT/UI === */
  #content {
    position:absolute;
    inset:0;
    z-index:3;
    display:flex;
  }
  #sidebar {
    width:200px; background:rgba(5,15,20,0.8); border-right:1px solid #033;
    display:flex; flex-direction:column; padding:15px;
  }
  #sidebar h2 { color:#33cfff; text-align:center; margin-bottom:10px; }
  .category-btn {
    background:#0a1f26; border:none; margin:4px 0; padding:8px; color:#33cfff;
    cursor:pointer; text-align:left; border-left:4px solid #0a5266;
    transition: all 0.2s;
  }
  .category-btn:hover { background:#0e2a34; border-left-color:#66f0ff; }
  .category-btn.active { border-left-color:#00ffff; background:#0e2a34; }
  #search { margin-top:auto; padding:6px; background:#0b1c23; border:1px solid #33cfff; color:#a0d8ff; }
  #main { flex:1; padding:20px; overflow-y:auto; }
  #breadcrumbs { margin-bottom:10px; font-size:14px; color:#33cfff; }
  #breadcrumbs span:hover { text-decoration: underline; }
  #entryContent h1 { font-size:22px; margin-bottom:10px; color:#66f0ff; }
  #entryContent p { font-size:15px; line-height:1.5em; }

  /* === INDICATORS AND CURSOR === */
  .indicator {
    position:absolute; width:12px; height:12px; border-radius:50%;
    background:#0f0; box-shadow:0 0 8px #0f0;
  }
  .indicator.red { background:#f00; box-shadow:0 0 8px #f00; }
  .indicator:nth-child(1){ top:10px; left:10px; }
  .indicator:nth-child(2){ top:10px; right:10px; }
  .indicator:nth-child(3){ bottom:10px; left:10px; }
  .indicator:nth-child(4){ bottom:10px; right:10px; }

  #cursor-dot {
    position:absolute;
    width:12px; height:12px;
    border-radius:50%;
    background: rgba(0,255,255,0.8);
    box-shadow:0 0 8px rgba(0,255,255,0.8), 0 0 15px rgba(0,255,255,0.5);
    pointer-events:none;
    transform: translate(-50%, -50%);
    z-index:4;
  }
</style>
</head>
<body>
<div id="datapad">
  <div class="indicator"></div>
  <div class="indicator red"></div>
  <div class="indicator red"></div>
  <div class="indicator"></div>

  <div id="screen">
    <div id="entryContainer">
      <div id="entryContent">
        <h1>Rebel Alliance Field Codex</h1>
        <p>Loading encrypted entries... Select a category on the left to access the database.</p>
      </div>
    </div>

    <div id="overlayEffects">
      <div id="blueBase"></div>
      <div id="flicker"></div>
      <div id="distortion"></div>
    </div>

    <div id="content">
      <div id="sidebar">
        <h2>Codex</h2>
        <button id="homeBtn" class="category-btn">Home</button>
        <button class="category-btn" data-category="planets">Planets</button>
        <button class="category-btn" data-category="factions">Factions</button>
        <button class="category-btn" data-category="technology">Technology</button>
        <button class="category-btn" data-category="characters">Characters</button>
        <input type="text" id="search" placeholder="Search...">
      </div>
      <div id="main">
        <div id="breadcrumbs"></div>
      </div>
    </div>

    <div id="cursor-dot"></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const codexData = {
    planets: [
      { name:"Yavin 4", image:"images/yavin-4.jpeg", description:"A jungle-covered moon used by the Rebel Alliance as a hidden base during the Galactic Civil War. Site of the first major victory against the Empire." },
      { name:"Hoth", image:"images/hoth.jpg", description:"An icy planet that served as a Rebel base during the Galactic Civil War." }
    ],
    factions: [
      { name:"Rebel Alliance", image:"images/rebel.jpeg", description:"An alliance of freedom fighters opposing the tyranny of the Galactic Empire." },
      { name:"Galactic Empire", image:"images/empire.jpeg", description:"The authoritarian regime controlling the galaxy with fear and military might." }
    ],
    technology: [
      { name:"X-wing Starfighter", image:"images/x-wing.jpeg", description:"Fast, reliable, and deadly starfighter used by the Rebel Alliance." },
      { name:"TIE Fighter", image:"images/tie.jpg", description:"The Imperial starfighter: fast, cheap, and overwhelming in numbers." }
    ],
    characters: [
      { name:"Mon Mothma", image:"images/mothma.jpeg", description:"Founder and leader of the Alliance." },
      { name:"Luke Skywalker", image:"images/luke.jpg", description:"The farm boy who became a Jedi Knight and hero of the Rebellion." }
    ]
  };

  const entryContainer = document.getElementById('entryContainer');
  const entryContent = document.getElementById('entryContent');
  const breadcrumbs = document.getElementById('breadcrumbs');
  const categoryBtns = document.querySelectorAll('.category-btn');
  const searchInput = document.getElementById('search');
  const homeBtn = document.getElementById('homeBtn');
  const flicker = document.getElementById('flicker');
  const distortion = document.getElementById('distortion');
  const screen = document.getElementById('screen');
  const cursorDot = document.getElementById('cursor-dot');

  let activeCategory = null;
  let activeSubFile = null;

  function updateBreadcrumbs() {
    breadcrumbs.innerHTML = '';
    if(activeCategory) {
      const catSpan = document.createElement('span');
      catSpan.textContent = activeCategory.charAt(0).toUpperCase() + activeCategory.slice(1);
      catSpan.style.cursor = 'pointer';
      catSpan.addEventListener('click', () => {
        activeSubFile = null;
        renderSubFiles(activeCategory);
      });
      breadcrumbs.appendChild(catSpan);

      if(activeSubFile) {
        const sep = document.createElement('span');
        sep.textContent = ' > ';
        breadcrumbs.appendChild(sep);

        const subSpan = document.createElement('span');
        subSpan.textContent = activeSubFile.name;
        breadcrumbs.appendChild(subSpan);
      }
    }
  }

  function renderSubFiles(category) {
    updateBreadcrumbs();
    entryContent.innerHTML = '';
    codexData[category].forEach(entry => {
      const btn = document.createElement('button');
      btn.textContent = entry.name;
      btn.classList.add('category-btn');
      btn.style.margin = '6px 0';
      btn.addEventListener('click', () => {
        activeSubFile = entry;
        renderEntryDetail(entry);
      });
      entryContent.appendChild(btn);
    });
  }

  function renderEntryDetail(entry) {
    updateBreadcrumbs();
    entryContent.innerHTML = `<h1>${entry.name}</h1>
                              <img src="${entry.image}" alt="${entry.name}">
                              <p>${entry.description}</p>`;
    const backBtn = document.createElement('button');
    backBtn.textContent = 'Back';
    backBtn.classList.add('category-btn');
    backBtn.style.marginTop = '20px';
    backBtn.addEventListener('click', () => {
      activeSubFile = null;
      renderSubFiles(activeCategory);
    });
    entryContent.appendChild(backBtn);
  }

  categoryBtns.forEach(btn => {
    if(btn.id === "homeBtn") return;
    btn.addEventListener('click', () => {
      categoryBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      activeCategory = btn.dataset.category;
      activeSubFile = null;
      renderSubFiles(activeCategory);
    });
  });

  searchInput.addEventListener('input', () => {
    if(activeCategory && !activeSubFile) {
      const filter = searchInput.value.toLowerCase();
      entryContent.innerHTML = '';
      codexData[activeCategory]
        .filter(entry => entry.name.toLowerCase().includes(filter))
        .forEach(entry => {
          const btn = document.createElement('button');
          btn.textContent = entry.name;
          btn.classList.add('category-btn');
          btn.style.margin = '6px 0';
          btn.addEventListener('click', () => {
            activeSubFile = entry;
            renderEntryDetail(entry);
          });
          entryContent.appendChild(btn);
        });
    }
  });

  homeBtn.addEventListener('click', () => {
    activeCategory = null;
    activeSubFile = null;
    breadcrumbs.innerHTML = '';
    entryContent.innerHTML = `<h1>Rebel Alliance Field Codex</h1>
                              <p>Loading encrypted entries... Select a category on the left to access the database.</p>`;
    categoryBtns.forEach(b => b.classList.remove('active'));
  });

  // Flicker (stronger)
  function randomFlicker() {
    if(Math.random() < 0.5){
      flicker.style.opacity = (0.15 + Math.random() * 0.5).toFixed(2);
      setTimeout(() => { flicker.style.opacity = 0; }, 30 + Math.random() * 100);
    }
  }
  setInterval(randomFlicker, 60);

  // Distortion follows cursor
  screen.addEventListener('mousemove', e => {
    const rect = screen.getBoundingClientRect();
    const x = ((e.clientX - rect.left)/rect.width)*100;
    const y = ((e.clientY - rect.top)/rect.height)*100;
    distortion.style.setProperty('--x', x + '%');
    distortion.style.setProperty('--y', y + '%');
  });

  // Random distortion pulse (slightly larger)
  function randomDistortionPulse() {
    const scale = 1 + Math.random()*0.05;
    distortion.style.transform = `scale(${scale})`;
    setTimeout(() => { distortion.style.transform = 'scale(1)'; }, 80 + Math.random()*70);
  }
  setInterval(randomDistortionPulse, 100);

  // Cursor dot tracking
  screen.addEventListener('mousemove', e => {
    const rect = screen.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    cursorDot.style.left = x + 'px';
    cursorDot.style.top = y + 'px';
  });

});
</script>
</body>
</html>
